<div class= "card-deck" style= "display:flex; justify-content: space-between">
    <% @listings.each_with_index do |listing, index| %>
        <div class = "d-inline-block">
            <div class="card border-dark mb-4 mr-2" style="width: 18rem; text-align:center">
                <% if listing.images != [] %>
                    <div id="carouselExampleIndicators-<%= index %>" class="carousel slide w-100" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <% listing.images.each_with_index do |image, x| %>
                                <% if x == 0 %>
                                    <li data-target="#carouselExampleIndicators-<%= index %>" data-slide-to="<%= x %>" class="active"></li>
                                <% else %>
                                    <li data-target="#carouselExampleIndicators-<%= index %>" data-slide-to="<%= x %>"></li>
                                <% end %>
                            <% end %>
                        </ol>
                        <div class="carousel-inner">

                            <% listing.images.each do |image| %>
                                <% if image == listing.images[0] %>
                                    <div class="carousel-item active">
                                    <img class="d-block w-100" src=<%= image.url %>>
                                    </div>
                                <% else %>
                                    <div class="carousel-item">
                                    <img class="d-block w-100" src=<%= image.url %>>
                                    </div>
                                <% end %>
                            <% end %>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators-<%= index %>" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators-<%= index %>" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title"><%= listing.property_name %></h5>
                        <h5 class="card-title"><%= listing.property_type %></h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"> RM <%= listing.price_per_night %> per night</li>
                        </ul> <br/>
                        <%= link_to 'View property', listing_path(listing), class:"btn btn-primary" %>
                    </div>
                    <div class="card-footer">
                        <% if listing.verification == true %>
                            <img class="card-img" style="width: 1.5rem;"src="/assets/verify-icon.png" alt="Card image cap">
                        <% end %>
                    </div>
                <% else %>
                    <div class="card-body">
                        <h5 class="card-title"><%= listing.property_name %></h5>
                        <h5 class="card-title"><%= listing.property_type %></h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"> RM <%= listing.price_per_night %> per night</li>
                        </ul> <br/>
                        <%= link_to 'View property', listing_path(listing), class:"btn btn-primary" %>
                    </div>
                    <div class="card-footer">
                        <% if listing.verification == true %>
                            <img class="card-img" style="width: 1.5rem;"src="/assets/verify-icon.png" alt="Card image cap">
                        <% end %>
                    </div>
                <% end %>
            </div>
        </div>
    <% end %>
</div>